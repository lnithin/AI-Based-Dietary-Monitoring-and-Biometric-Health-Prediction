{
  "model_config": {
    "name": "LSTM Glucose Prediction",
    "version": "1.0.0",
    "description": "LSTM-based model for predicting blood glucose levels from meal ingredients and biometric data"
  },
  
  "architecture": {
    "type": "LSTM",
    "sequence_length": 24,
    "input_features": 15,
    "layers": [
      {
        "name": "lstm_layer_1",
        "type": "LSTM",
        "units": 64,
        "activation": "relu",
        "return_sequences": true,
        "dropout": 0.2
      },
      {
        "name": "lstm_layer_2",
        "type": "LSTM",
        "units": 32,
        "activation": "relu",
        "return_sequences": true,
        "dropout": 0.2
      },
      {
        "name": "lstm_layer_3",
        "type": "LSTM",
        "units": 16,
        "activation": "relu",
        "dropout": 0.1
      },
      {
        "name": "dense_1",
        "type": "Dense",
        "units": 32,
        "activation": "relu"
      },
      {
        "name": "dense_2",
        "type": "Dense",
        "units": 16,
        "activation": "relu"
      },
      {
        "name": "glucose_output",
        "type": "Dense",
        "units": 1,
        "activation": "linear"
      }
    ]
  },
  
  "training": {
    "optimizer": {
      "type": "Adam",
      "learning_rate": 0.001,
      "beta_1": 0.9,
      "beta_2": 0.999
    },
    "loss_function": "mean_absolute_error",
    "metrics": ["mae", "mse"],
    "epochs": 50,
    "batch_size": 32,
    "early_stopping": {
      "enabled": true,
      "monitor": "val_loss",
      "patience": 10,
      "restore_best_weights": true
    },
    "learning_rate_reduction": {
      "enabled": true,
      "monitor": "val_loss",
      "factor": 0.5,
      "patience": 5,
      "min_lr": 0.00001
    },
    "validation_split": 0.2
  },
  
  "input_features": [
    {
      "name": "carbs_g",
      "type": "float",
      "unit": "grams",
      "min": 0,
      "max": 200,
      "description": "Carbohydrate content of meal"
    },
    {
      "name": "protein_g",
      "type": "float",
      "unit": "grams",
      "min": 0,
      "max": 50,
      "description": "Protein content of meal"
    },
    {
      "name": "fat_g",
      "type": "float",
      "unit": "grams",
      "min": 0,
      "max": 100,
      "description": "Fat content of meal"
    },
    {
      "name": "fiber_g",
      "type": "float",
      "unit": "grams",
      "min": 0,
      "max": 15,
      "description": "Dietary fiber content"
    },
    {
      "name": "sugar_g",
      "type": "float",
      "unit": "grams",
      "min": 0,
      "max": 100,
      "description": "Sugar content of meal"
    },
    {
      "name": "sodium_mg",
      "type": "float",
      "unit": "mg",
      "min": 0,
      "max": 3000,
      "description": "Sodium content"
    },
    {
      "name": "heart_rate",
      "type": "float",
      "unit": "bpm",
      "min": 40,
      "max": 200,
      "description": "Heart rate reading"
    },
    {
      "name": "activity_level",
      "type": "float",
      "unit": "0-1 scale",
      "min": 0,
      "max": 1,
      "description": "Physical activity level (0=rest, 1=intense)"
    },
    {
      "name": "time_since_meal",
      "type": "float",
      "unit": "hours",
      "min": 0,
      "max": 8,
      "description": "Hours elapsed since last meal"
    },
    {
      "name": "meal_interval_h",
      "type": "float",
      "unit": "hours",
      "min": 2,
      "max": 8,
      "description": "Typical interval between meals"
    },
    {
      "name": "baseline_glucose",
      "type": "float",
      "unit": "mg/dL",
      "min": 70,
      "max": 150,
      "description": "User's typical fasting glucose level"
    },
    {
      "name": "stress_level",
      "type": "float",
      "unit": "0-1 scale",
      "min": 0,
      "max": 1,
      "description": "Perceived stress level"
    },
    {
      "name": "sleep_quality",
      "type": "float",
      "unit": "0-1 scale",
      "min": 0,
      "max": 1,
      "description": "Quality of sleep (0=poor, 1=excellent)"
    },
    {
      "name": "hydration_level",
      "type": "float",
      "unit": "0-1 scale",
      "min": 0,
      "max": 1,
      "description": "Hydration status (0=dehydrated, 1=well-hydrated)"
    },
    {
      "name": "medication_taken",
      "type": "binary",
      "unit": "0/1",
      "min": 0,
      "max": 1,
      "description": "Whether diabetes medication was taken"
    }
  ],
  
  "output": {
    "name": "predicted_glucose",
    "type": "float",
    "unit": "mg/dL",
    "min": 50,
    "max": 250,
    "description": "Predicted blood glucose level"
  },
  
  "performance_targets": {
    "rmse_mg_dl": {
      "target": 7.5,
      "acceptable_range": "5-10",
      "description": "Root Mean Square Error"
    },
    "mae_mg_dl": {
      "target": 6.0,
      "acceptable_range": "4-8",
      "description": "Mean Absolute Error"
    },
    "r2_score": {
      "target": 0.88,
      "acceptable_range": "0.80-0.95",
      "description": "Coefficient of determination"
    },
    "mape_percent": {
      "target": 7.0,
      "acceptable_range": "5-10",
      "description": "Mean Absolute Percentage Error"
    }
  },
  
  "clinical_ranges": {
    "hypoglycemic": {
      "range": "0-70",
      "status": "CRITICAL",
      "action": "Immediate intervention - consume fast-acting carbs"
    },
    "normal_fasting": {
      "range": "70-100",
      "status": "NORMAL",
      "action": "No action needed"
    },
    "elevated": {
      "range": "100-140",
      "status": "NORMAL",
      "action": "Monitor, normal post-meal range"
    },
    "high": {
      "range": "140-200",
      "status": "WARNING",
      "action": "Monitor glucose trend, adjust diet"
    },
    "critical_high": {
      "range": "200+",
      "status": "CRITICAL",
      "action": "Alert user, recommend medical consultation"
    }
  },
  
  "data_requirements": {
    "minimum_samples": 500,
    "recommended_samples": 1000,
    "minimum_features": 15,
    "sequence_length": 24,
    "temporal_resolution": "hourly"
  },
  
  "normalization": {
    "method": "MinMaxScaler",
    "feature_range": [0, 1],
    "scaler_pickle_path": "models/feature_scaler.pkl",
    "glucose_scaler_pickle_path": "models/glucose_scaler.pkl"
  },
  
  "inference": {
    "batch_prediction": true,
    "max_batch_size": 128,
    "return_confidence_intervals": true,
    "uncertainty_method": "monte_carlo_dropout",
    "monte_carlo_samples": 10,
    "confidence_level": 0.95
  },
  
  "deployment": {
    "model_format": "h5",
    "model_path": "models/glucose_lstm_model.h5",
    "api_framework": "Flask",
    "api_port": 5001,
    "api_version": "v1",
    "api_base_url": "/api/glucose-prediction"
  },
  
  "logging": {
    "level": "INFO",
    "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    "file": "logs/glucose_model.log"
  },
  
  "monitoring": {
    "track_predictions": true,
    "track_performance": true,
    "track_drift": true,
    "drift_threshold": 0.1
  }
}
